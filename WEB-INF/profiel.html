<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <meta name="author" content="Rowan Dings">
    <meta name="theme-color" content="#0163AE" />
    <link href='css/general.css' rel='stylesheet' type='text/css' />
    <link href='css/modal.css' rel='stylesheet' type='text/css' />
    <link href='css/management.css' rel='stylesheet' type='text/css' />
    <link href='css/profiel.css' rel='stylesheet' type='text/css' />
    <link href='css/fa/css/font-awesome.min.css' rel='stylesheet' type='text/css' />
    <script type="text/javascript" src="js/universal.js"></script>
    <script type="text/javascript" src="js/profile.js"></script>
    <script type="text/javascript" src="js/table-generate.js"></script>
    <title>Autotracker - Uw profiel</title>
</head>

<body>
    <div class="side-nav scroller">
        <img src="img/car.jpg" class="img-header"/>
        <div class="b-header"><h2>Welkom</h2></div>
        <h3>Home</h3>
        <a href="profiel.html"><p class="fa fa-user"></p><p>Profiel</p></a>
        <a href="track.html"><p class="fa fa-map-pin"></p><p>Track</p></a>
        <div class="divider"></div>
        <h3>Beheer</h3>
        <a onclick="openMenu(modals.car)"><p class="fa fa-car"></p><p>Voeg voertuig toe</p></a>
        <div class="divider"></div>
        <h3>Administratie</h3>    
        <a href="voertuigen.html"><p class="fa fa-car"></p><p>Voertuigen</p></a>
        <a href="tarieven.html"><p class="fa fa-compass"></p><p>Tarieven</p></a>
        <a href="facturen.html"><p class="fa fa-balance-scale"></p><p>Facturen</p></a>
        <a roles="GOVERNMENT_EMPLOYEE" href="admin.html"><p class="fa fa-address-card"></p><p>Administratie</p></a>
        <div class="divider"></div>
        <h3>Algemeen</h3>
        <a href="logout.html"><p class="fa fa-power-off"></p><p>Uitloggen</p></a>
        <a href="about.html"><p class="fa fa-info"></p><p>Over Ons</p></a>
        <div class="divider"></div>
    </div>
    <div class="contents">
        <div class="header small-contents"><h3>Welkom <span user="name"></span></h3></div>
        <div class="divider"></div>
        <div id="dynamic-table" class="small-contents">
            <h3>Profieldetails</h3>
            <table id="user-table" class="vertical-table soft-table">
                <thead>
                    <tr>
                        <th id="user.name">Volledige naam</th>
                        <th id="user.residency"
                            GERMANY="Duitsland">Land van herkomst</th>
                        <th id="user.role"
                            CUSTOMER="Klant"
                            BILL_ADMINISTRATOR="Factuuradministrator"
                            SYSTEM_ADMINISTRATOR="Systeembeheerder"
                            KILOMETER_TRACKER="Tariefbeheerder"
                            GOVERNMENT_EMPLOYEE="Overheidsmedewerker">Site rol</th>
                        <th id="email">Email</th>
                    </tr>
                </thead>
            </table>
        </div>
        <div class="divider"></div>
        <div id="dynamic-table" class="small-contents">
            <h3>Uitgaande transfers</h3>
            <table id="trades-from">
                <thead>
                    <tr>
                        <th id="currentOwner.name">Van</th>
                        <th id="vehicleToTransfer.licensePlate">Nummerplaat</th>
                        <th id="ownerToTransferTo.name">Naar</th>
                        <th id="status"
                            WaitingForResponseNewOwner="Request verstuurt"
                            AcceptedNewOwner="Request geaccepteerd"
                            DeclinedNewOwner="Request afgewezen"
                            AcceptedCurrentOwner="Request bevestigd"
                            DeclinedCurrentOwner="Geannuleerd"
                            ConfirmedOwnership="Overschrijving bevestigd"
                            Completed="Voltooid"
                        >Status</th>
                        <th id="actions_Accept" content="" class="hidden" action-class="fa fa-check confirm" action="click" function="acceptRequest({0})" parameters="id, vehicleToTransfer.licensePlate"></th>
                        <th id="actions_Deny" content="" action-class="fa fa-times warn" action="click" function="declineRequest({0})" parameters="id, vehicleToTransfer.licensePlate">Acties</th>
                    </tr>
                </thead>
            </table>
        </div>
        <div class="divider"></div>
        <div id="dynamic-table" class="small-contents">
            <h3>Binnenkomende transfers</h3>
            <table id="trades-to">
                <thead>
                    <tr>
                        <th id="ownerToTransferTo.name">Naar</th>
                        <th id="vehicleToTransfer.licensePlate">Nummerplaat</th>
                        <th id="currentOwner.name">Van</th>
                        <th id="status"
                            WaitingForResponseNewOwner="Request verstuurt"
                            AcceptedNewOwner="Request geaccepteerd"
                            DeclinedNewOwner="Request afgewezen"
                            AcceptedCurrentOwner="Request bevestigd"
                            DeclinedCurrentOwner="Geannuleerd"
                            ConfirmedOwnership="Overschrijving bevestigd"
                            Completed="Voltooid"
                        >Status</th>
                        <th id="actions_Accept" content="" class="hidden" action-class="fa fa-check" action="click" function="acceptRequest({0})" parameters="id, vehicleToTransfer.licensePlate"></th>
                        <th id="actions_Deny" content="" action-class="fa fa-times" action="click" function="declineRequest({0})" parameters="id, vehicleToTransfer.licensePlate">Acties</th>
                    </tr>
                </thead>
            </table>
        </div>
        <div class="divider"></div>
        <div id="dynamic-table" class="small-contents">
            <h3>Facturen</h3>
            <table id="table-generate">
                <thead>
                    <tr>
                        <th id="billnr">FactuurNr</th>
                        <th id="license">Nummerplaat</th>
                        <th id="status">Status</th>
                        <th id="price">Totaal bedrag</th>
                        <th id="month">Maand</th>
                        <th id="actions_Details" content="" action-class="fa fa-info-circle" action="a" link="factuur.html?id={0}" parameters="billnr">Acties</th>
                    </tr>
                </thead>
            </table>
        </div>
        <div class="divider"></div>
        <div class="small-contents">
            <h3>Auto's</h3>
            <p id="no-cars" class="hidden">U heeft geen auto's geregistreert. <a class="inline-a" onclick="openMenu(modals.car)">Registreer</a> een auto.</p>
        </div>
        <div id="car-holder" class="flex small-contents hidden">
            <div class="auto-box">
                <div class="car-box"><img src="img/carimage.png"></div>
                <div class="details-box">
                    <h3>Details</h3>
                    <div class="divider"></div>
                    <p id="merk">Merk</p>
                    <p id="model">Model</p>
                    <p id="nummerplaat">Nummerplaat</p>
                    <p id="bouwdatum">Bouwdatum</p>
                    <div class="divider"></div>
                    <a class="btn-transfer btn">Schrijf over</a>
                    <a id="facturen" class="btn">Facturen</a>
                    <a id="track" class="btn">Track</a>
                </div>
            </div>
        </div>
    </div>
    <div id="darkener" class="hidden darkener" onclick="closeMenu(event)"></div>
    <div id="notif-holder"></div>
    <script async type="text/javascript" src="js/modal.js"></script>
    <script async type="text/javascript" src="js/modal/car_customer.js"></script>
    <script async type="text/javascript" src="js/modal/car_transfer.js"></script>
    <script async defer type="text/javascript" src="js/modal/confirm.js"></script>
    <script>
        waitUntil(function () {
                return typeof window.user.entity.email != 'undefined';
            }, function () {

                new TableLoader({
                    URL: "users/account/email/" + window.user.entity.email,
                    id: "user-table"
                }).fetch();

                new TableLoader({
                    URL: "bills/currentUser",
                    id: "table-generate"
                }).fetch();

                new TableLoader({
                    URL: "trade/transfers/from",
                    id: "trades-from"
                }).fetch();

                new TableLoader({
                    URL: "trade/transfers/to",
                    id: "trades-to"
                }).fetch();
            });
    </script>
    <script type="text/javascript" src="js/notif.js"></script>
</body>
</html>